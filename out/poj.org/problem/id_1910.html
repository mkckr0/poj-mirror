<html><head><meta content="no-cache" http-equiv="Pragma"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta content="en-US" http-equiv="Content-Language"/><title>1910 -- Adam's Genes</title><link href="../poj.css" rel="stylesheet" type="text/css"/><link href="../poj.ico" rel="shortcut icon"/><link href="../poj.gif" rel="icon" type="image/gif"/><script language="javascript" src="../poj.js"></script></head><body alink="blue" lang="en-US" leftmargin="5" link="blue" onkeydown="KeyDown(event)" vlink="blue"><a name="top"></a><table border="1" bordercolor="#ffffff" style="BORDER-COLLAPSE: collapse" width="100%"><tbody><tr><td align="CENTER" colspan="5"><table cellpadding="0" class="h1"><tr><td align="left" width="25%"><img border="0" height="100" src="../images/logo1.jpg"/></td><td bgcolor="#EAEFFD" colspan="3"><table class="h2"><tr><td><img border="0" height="90" src="../images/logo0.gif" width="450"/></td><td width="95"><img border="0" height="95" src="../images/logo3.gif" width="95"/></td></tr></table></td></tr></table></td></tr><tr align="CENTER" bgcolor="#6589d1" valign="top"><th class="h">Online Judge</th><th class="h">Problem Set</th><th class="h">Authors</th><th class="h">Online Contests</th><th class="h">User</th></tr><tr align="CENTER" bgcolor="#f1f1fd" valign="top"><td class="h" onmouseout="scbg(this, 0)" onmouseover="scbg(this, 1)"><a href="http://poj.org/bbs">Web Board</a><br/><a href="../index.html">Home Page</a><br/><a href="../page/id_1000.html" target="_blank">F.A.Qs</a><br/><a href="http://poj.org/chart">Statistical Charts</a></td><td class="h" onmouseout="scbg(this, 0)" onmouseover="scbg(this, 1)"><form onsubmit="event.preventDefault(); let pid = (new FormData(event.target)).get('pid'); window.location=`../problem/id_${pid}.html`"><a href="../problemlist.html">Problems</a><br/><a href="http://poj.org/submit">Submit Problem</a><br/><a href="http://poj.org/status">Online Status</a><br/><font color="blue">Prob.ID:</font><input name="pid" size="6" type="text"/><input name="pb1" type="Submit" value="Go"/></form></td><td class="h" onmouseout="scbg(this,0)" onmouseover="scbg(this,1)"><form action="searchuser" method="GET"><a href="http://poj.org/register">Register</a><br/><a href="http://poj.org/modifyuser">Update your info</a><br/><a href="http://poj.org/userlist">Authors ranklist</a><br/><input name="key" size="10" type="text"/><input name="B1" type="Submit" value="Search"/></form></td>
<td class="h" onmouseout="scbg(this,0)" onmouseover="scbg(this,1)"><font color="#1a5cc8">Current Contest</font><br/><a href="http://poj.org/pastcontests">Past Contests</a><br/><a href="http://poj.org/contests">Scheduled Contests</a><br/><a href="http://poj.org/challenge.html" target="_blank"><font color="red">Award Contest</font></a></td><td align="left" class="h" onmouseout="scbg(this,0)" onmouseover="scbg(this,1)"><form action="login" method="POST"><table><tr><td>User ID:</td><td><input name="user_id1" size="10" style="font-family:monospace" type="text"/></td></tr><tr><td>Password:</td><td><input name="password1" size="10" style="font-family:monospace" type="password"/></td></tr></table><input name="B1" type="Submit" value="login"/>  <a href="http://poj.org/register" target="_parent">Register</a><input name="url" type="hidden" value="%2Fproblem%3Fid%3D1910"/></form></td></tr></tbody></table><table background="../images/table_back.jpg" border="0" width="100%"><tr><td>
<div style="position: absolute; right: 10px;">Language:<select onchange="window.location.href='problem?id=1910&amp;lang='+this.value+'&amp;change=true'" size="1"><option selected="" value="default">Default</option></select></div><div class="ptt" lang="en-US">Adam's Genes</div>
<div class="plm"><table align="center"><tr><td><b>Time Limit:</b> 1000MS</td><td width="10px"></td><td><b>Memory Limit:</b> 30000K</td></tr><tr><td><b>Total Submissions:</b> 276</td><td width="10px"></td><td><b>Accepted:</b> 28</td></tr></table></div><p class="pst">Description</p><div class="ptx" lang="en-US">You've been hired by Gemini Labs, the world leader in human cloning, to write decision support software. At Gemini, all clones are derived from "ADAM", a genetically perfect human. Something about his DNA makes him much easier to clone than normal humans. Not all the clones of Adam are the same, though, because geneticists introduce mutations, in the form of recessive genes, to learn more about genetics. For example, Bob might be a clone of Adam with a recessive gene for baldness added. Scientists would study Bob to see what subtle effects the gene may have. Clones of Bob would carry the recessive gene, as would clones of those clones, and so on. All is well as long as no clone derived from Bob is given a second recessive baldness gene. If that were to happen, a bald clone would be produced and the Cloning Board would shut Gemini down. <br/> <br/>The software you are to write takes cloning requests from the research staff and evaluates them for consistency and safety. A collection of requests is "inconsistent" if it includes a clone that is not descended from Adam. A collection of requests is "unsafe" if it produces a clone with two identical recessive genes. <br/></div><p class="pst">Input</p><div class="ptx" lang="en-US">Your program consumes a file of cloning requests, one per line. Here is the format of a cloning request: <br/> <br/>&lt; request &gt; = clone_&lt; name &gt;_from_&lt; name &gt;&lt; genelist &gt; <br/>&lt; genelist &gt; = NULL | _mutating_&lt; gene &gt;&lt; genes &gt; <br/>&lt; genes &gt; = NULL | _&lt; gene &gt;&lt; genes &gt; <br/>&lt; gene &gt; = 3 upper case alphabetical characters <br/>&lt; name &gt; = 1 to 10 upper case alphabetical characters <br/>_ = one blank <br/> <br/>A typical cloning request is <br/> <br/>clone BOB from ADAM mutating BLD HEM <br/> <br/>Note: there is always exactly one space between words; the last character on a line is immediately followed by EOLN. There can be zero to ten mutations in a request. If there are no mutations in the request, the keyword "mutating" does not appear, e.g., <br/> <br/>clone BOB from ADAM <br/> <br/>The input is guaranteed to satisfy the syntactic format specifications, and it is guaranteed to contain at most one cloning request per clone, i.e., "clone BOB" will appear no more than once as the beginning of an input line. Furthermore, you are to process requests as though only those definitions which precede it are in effect. Therefore, if you have the following input segment <br/> <br/>clone BOB from ADAM <br/>clone MIKE from TIM <br/>clone TIM from BOB <br/> <br/>your output would include <br/> <br/>clone MIKE from TIM has no connection to ADAM <br/> <br/>because at the time MIKE was cloned, there was no connection to ADAM. If an clone is not consistent and safe, then all subsequent clones from that clone should be reported as having no connection to ADAM. For example, if you have the following input segment <br/> <br/>clone BOB from ADAM mutating BLD <br/>clone CHARLIE from BOB mutating BLD <br/>clone DAVID from CHARLIE <br/> <br/>your output would include <br/> <br/>clone BOB from ADAM is consistent and safe <br/>clone CHARLIE from BOB was at least twice mutated with BLD <br/>clone DAVID from CHARLIE has no connection to ADAM <br/> <br/>You are also guaranteed that no gene is listed twice in the same request. <br/> <br/></div><p class="pst">Output</p><div class="ptx" lang="en-US">Your program produces a file of the processed requests, one per line, <br/>in the same order as they were consumed. The requests are modified <br/>according to the following rules. <br/> <br/>1. If a clone is consistent and safe, the line should have the format clone JOE from ADAM is consistent and safe <br/> <br/>2. If a clone is inconsistent, the line should indicate this as follows clone &lt; name &gt; from &lt; name &gt; has no connection to ADAM <br/> <br/>3. If a clone is unsafe, the line should indicate this as follows clone &lt; name &gt; from &lt; name &gt; was at least twice mutated with &lt; gene &gt; where &lt; gene &gt; is the first gene to appear in the clone's mutation list that is a second mutation from Adam. You should print ONLY the first such doubly mutated gene.<br/> <br/>If a particular cloning request is inconsistent, there is no need to report whether or not it is safe.  Your output should contain exactly one space between words and no leading or trailing spaces. </div><p class="pst">Sample Input</p><pre class="sio">clone JOE from ADAM
clone BOB from ADAM mutating HEM
clone SAM from BOB mutating BLD
clone ED from SAM mutating BLD
clone FRANK from ED mutating HEM
clone KAIN from ABEL
clone ABEL from KAIN</pre><p class="pst">Sample Output</p><pre class="sio">clone JOE from ADAM is consistent and safe
clone BOB from ADAM is consistent and safe
clone SAM from BOB is consistent and safe
clone ED from SAM was at least twice mutated with BLD
clone FRANK from ED has no connection to ADAM
clone KAIN from ABEL has no connection to ADAM
clone ABEL from KAIN has no connection to ADAM</pre><p class="pst">Source</p><div class="ptx" lang="en-US"><a href="http://poj.org/searchproblem?field=source&amp;key=South+Central+USA+1997">South Central USA 1997</a></div></td></tr></table>
<font color="#333399" size="3"><p align="center">
[<a href="http://poj.org/submit?problem_id=1910">Submit</a>]  
 [<a href="javascript:history.go(-1)">Go Back</a>]   [<a href="http://poj.org/problemstatus?problem_id=1910">Status</a>]   
[<a href="http://poj.org/bbs?problem_id=1910">Discuss</a>]
</p></font>
<p><img border="0" height="30" src="../images/home.gif" width="40"/><font size="3"><a href="../index.html">Home Page</a> </font>  <img border="0" height="30" src="../images/goback.gif" width="40"/><font size="3"><a href="javascript:history.go(-1)">Go Back</a>  <img border="0" height="30" src="../images/top.gif" width="40"/><a href="http://poj.org#top">To top</a></font><br/></p><hr/><p align="center" style="font-family:Arial, Helvetica, sans-serif">All Rights Reserved 2003-2013 Ying Fuchen,Xu Pengcheng,Xie Di<br/>Any problem, Please <a href="mailto:webmaster@poj.org">Contact Administrator</a></p></body></html>
