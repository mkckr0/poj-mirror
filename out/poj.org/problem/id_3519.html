<html><head><meta content="no-cache" http-equiv="Pragma"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta content="en-US" http-equiv="Content-Language"/><title>3519 -- Minimal Backgammon</title><link href="../poj.css" rel="stylesheet" type="text/css"/><link href="../poj.ico" rel="shortcut icon"/><link href="../poj.gif" rel="icon" type="image/gif"/><script language="javascript" src="../poj.js"></script></head><body alink="blue" lang="en-US" leftmargin="5" link="blue" onkeydown="KeyDown(event)" vlink="blue"><a name="top"></a><table border="1" bordercolor="#ffffff" style="BORDER-COLLAPSE: collapse" width="100%"><tbody><tr><td align="CENTER" colspan="5"><table cellpadding="0" class="h1"><tr><td align="left" width="25%"><img border="0" height="100" src="../images/logo1.jpg"/></td><td bgcolor="#EAEFFD" colspan="3"><table class="h2"><tr><td><img border="0" height="90" src="../images/logo0.gif" width="450"/></td><td width="95"><img border="0" height="95" src="../images/logo3.gif" width="95"/></td></tr></table></td></tr></table></td></tr><tr align="CENTER" bgcolor="#6589d1" valign="top"><th class="h">Online Judge</th><th class="h">Problem Set</th><th class="h">Authors</th><th class="h">Online Contests</th><th class="h">User</th></tr><tr align="CENTER" bgcolor="#f1f1fd" valign="top"><td class="h" onmouseout="scbg(this, 0)" onmouseover="scbg(this, 1)"><a href="http://poj.org/bbs">Web Board</a><br/><a href="../index.html">Home Page</a><br/><a href="../page/id_1000.html" target="_blank">F.A.Qs</a><br/><a href="http://poj.org/chart">Statistical Charts</a></td><td class="h" onmouseout="scbg(this, 0)" onmouseover="scbg(this, 1)"><form onsubmit="event.preventDefault(); let pid = (new FormData(event.target)).get('pid'); window.location=`../problem/id_${pid}.html`"><a href="../problemlist.html">Problems</a><br/><a href="http://poj.org/submit">Submit Problem</a><br/><a href="http://poj.org/status">Online Status</a><br/><font color="blue">Prob.ID:</font><input name="pid" size="6" type="text"/><input name="pb1" type="Submit" value="Go"/></form></td><td class="h" onmouseout="scbg(this,0)" onmouseover="scbg(this,1)"><form action="searchuser" method="GET"><a href="http://poj.org/register">Register</a><br/><a href="http://poj.org/modifyuser">Update your info</a><br/><a href="http://poj.org/userlist">Authors ranklist</a><br/><input name="key" size="10" type="text"/><input name="B1" type="Submit" value="Search"/></form></td>
<td class="h" onmouseout="scbg(this,0)" onmouseover="scbg(this,1)"><font color="#1a5cc8">Current Contest</font><br/><a href="http://poj.org/pastcontests">Past Contests</a><br/><a href="http://poj.org/contests">Scheduled Contests</a><br/><a href="http://poj.org/challenge.html" target="_blank"><font color="red">Award Contest</font></a></td><td align="left" class="h" onmouseout="scbg(this,0)" onmouseover="scbg(this,1)"><form action="login" method="POST"><table><tr><td>User ID:</td><td><input name="user_id1" size="10" style="font-family:monospace" type="text"/></td></tr><tr><td>Password:</td><td><input name="password1" size="10" style="font-family:monospace" type="password"/></td></tr></table><input name="B1" type="Submit" value="login"/>  <a href="http://poj.org/register" target="_parent">Register</a><input name="url" type="hidden" value="%2Fproblem%3Fid%3D3519"/></form></td></tr></tbody></table><table background="../images/table_back.jpg" border="0" width="100%"><tr><td>
<div style="position: absolute; right: 10px;">Language:<select onchange="window.location.href='problem?id=3519&amp;lang='+this.value+'&amp;change=true'" size="1"><option selected="" value="default">Default</option></select></div><div class="ptt" lang="en-US">Minimal Backgammon</div>
<div class="plm"><table align="center"><tr><td><b>Time Limit:</b> 5000MS</td><td width="10px"></td><td colspan="3"><b>Memory Limit:</b> 65536K</td></tr><tr><td><b>Total Submissions:</b> 1343</td><td width="10px"></td><td><b>Accepted:</b> 768</td><td width="10px"></td><td style="font-weight:bold; color:red;">Special Judge</td></tr></table></div><p class="pst">Description</p><div class="ptx" lang="en-US"><table align="right"><tr align="center"><td><img src="../images/3519_1.png"/><br/>Figure 2: An example game</td></tr></table><p>Here is a very simple variation of the game backgammon, named “Minimal Backgammon”. The game is played by only one player, using only one of the dice and only one checker (the token used by the player).</p><p>The game board is a line of (<i>N</i> + 1) squares labeled as 0 (the start) to <i>N</i> (the goal). At the beginning, the checker is placed on the start (square 0). The aim of the game is to bring the checker to the goal (square <i>N</i>). The checker proceeds as many squares as the roll of the dice. The dice generates six integers from 1 to 6 with equal probability.</p><p>The checker should not go beyond the goal. If the roll of the dice would bring the checker beyond the goal, the checker retreats from the goal as many squares as the excess. For example, if the checker is placed at the square (<i>N</i> − 3), the roll “5” brings the checker to the square (<i>N</i> − 2), because the excess beyond the goal is 2. At the next turn, the checker proceeds toward the goal as usual.</p><p>Each square, except the start and the goal, may be given one of the following two special instructions.</p><ul><li><p>Lose one turn (labeled “<span style="font-family: Arial,Helvetica,sans-serif;">L</span>” in Figure 2)<br/>If the checker stops here, you cannot move the checker in the next turn.</p></li><li><p>Go back to the start (labeled “<span style="font-family: Arial,Helvetica,sans-serif;">B</span>” in Figure 2)<br/>If the checker stops here, the checker is brought back to the start.</p></li></ul><p>Given a game board configuration (the size <i>N</i>, and the placement of the special instructions), you are requested to compute the probability with which the game succeeds within a given number of turns.</p></div><p class="pst">Input</p><div class="ptx" lang="en-US"><p>The input consists of multiple datasets, each containing integers in the following format.</p><p style="padding-left: 2em;"><i>N</i> <i>T</i> <i>L</i> <i>B</i><br/><i>Lose</i><sub>1</sub><br/>⋯<br/><i>Lose<sub>L</sub></i><br/><i>Back</i><sub>1</sub><br/>⋯<br/><i>Back<sub>B</sub></i></p><p><i>N</i> is the index of the goal, which satisfies 5 ≤ <i>N</i> ≤ 100. T is the number of turns. You are requested to compute the probability of success within <i>T</i> turns. <i>T</i> satisfies 1 ≤ <i>T</i> ≤ 100. <i>L</i> is the number of squares marked “Lose one turn”, which satisfies 0 ≤ <i>L</i> ≤ <i>N</i> − 1. <i>B</i> is the number of squares marked “Go back to the start”, which satisfies 0 ≤ <i>B</i> ≤ <i>N</i> − 1. They are separated by a space.</p><p><i>Lose<sub>i</sub></i>’s are the indexes of the squares marked “Lose one turn”, which satisfy 1 ≤ <i>Lose<sub>i</sub></i> ≤ N − 1. All <i>Lose<sub>i</sub></i>’s are distinct, and sorted in ascending order. <i>Back<sub>i</sub></i>’s are the indexes of the squares marked “Go back to the start”, which satisfy 1 ≤ <i>Back<sub>i</sub></i> ≤ N − 1. All <i>Back<sub>i</sub></i>’s are distinct, and sorted in ascending order. No numbers occur both in <i>Lose<sub>i</sub></i>’s and <i>Back<sub>i</sub></i>’s.</p><p>The end of the input is indicated by a line containing four zeros separated by a space.</p></div><p class="pst">Output</p><div class="ptx" lang="en-US"><p>For each dataset, you should answer the probability with which the game succeeds within the given number of turns. The output should not contain an error greater than 0.00001.</p></div><p class="pst">Sample Input</p><pre class="sio">6 1 0 0
7 1 0 0
7 2 0 0
6 6 1 1
2
5
7 10 0 6
1
2
3
4
5
6
0 0 0 0</pre><p class="pst">Sample Output</p><pre class="sio">0.166667
0.000000
0.166667
0.619642
0.000000</pre><p class="pst">Source</p><div class="ptx" lang="en-US"><a href="http://poj.org/searchproblem?field=source&amp;key=Japan+2007">Japan 2007</a></div></td></tr></table>
<font color="#333399" size="3"><p align="center">
[<a href="http://poj.org/submit?problem_id=3519">Submit</a>]  
 [<a href="javascript:history.go(-1)">Go Back</a>]   [<a href="http://poj.org/problemstatus?problem_id=3519">Status</a>]   
[<a href="http://poj.org/bbs?problem_id=3519">Discuss</a>]
</p></font>
<p><img border="0" height="30" src="../images/home.gif" width="40"/><font size="3"><a href="../index.html">Home Page</a> </font>  <img border="0" height="30" src="../images/goback.gif" width="40"/><font size="3"><a href="javascript:history.go(-1)">Go Back</a>  <img border="0" height="30" src="../images/top.gif" width="40"/><a href="http://poj.org#top">To top</a></font><br/></p><hr/><p align="center" style="font-family:Arial, Helvetica, sans-serif">All Rights Reserved 2003-2013 Ying Fuchen,Xu Pengcheng,Xie Di<br/>Any problem, Please <a href="mailto:webmaster@poj.org">Contact Administrator</a></p></body></html>
