<html><head><meta content="no-cache" http-equiv="Pragma"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta content="en-US" http-equiv="Content-Language"/><title>3652 -- Persistent Bits</title><link href="../poj.css" rel="stylesheet" type="text/css"/><link href="../poj.ico" rel="shortcut icon"/><link href="../poj.gif" rel="icon" type="image/gif"/><script language="javascript" src="../poj.js"></script></head><body alink="blue" lang="en-US" leftmargin="5" link="blue" onkeydown="KeyDown(event)" vlink="blue"><a name="top"></a><table border="1" bordercolor="#ffffff" style="BORDER-COLLAPSE: collapse" width="100%"><tbody><tr><td align="CENTER" colspan="5"><table cellpadding="0" class="h1"><tr><td align="left" width="25%"><img border="0" height="100" src="../images/logo1.jpg"/></td><td bgcolor="#EAEFFD" colspan="3"><table class="h2"><tr><td><img border="0" height="90" src="../images/logo0.gif" width="450"/></td><td width="95"><img border="0" height="95" src="../images/logo3.gif" width="95"/></td></tr></table></td></tr></table></td></tr><tr align="CENTER" bgcolor="#6589d1" valign="top"><th class="h">Online Judge</th><th class="h">Problem Set</th><th class="h">Authors</th><th class="h">Online Contests</th><th class="h">User</th></tr><tr align="CENTER" bgcolor="#f1f1fd" valign="top"><td class="h" onmouseout="scbg(this, 0)" onmouseover="scbg(this, 1)"><a href="http://poj.org/bbs">Web Board</a><br/><a href="../index.html">Home Page</a><br/><a href="../page/id_1000.html" target="_blank">F.A.Qs</a><br/><a href="http://poj.org/chart">Statistical Charts</a></td><td class="h" onmouseout="scbg(this, 0)" onmouseover="scbg(this, 1)"><form onsubmit="event.preventDefault(); let pid = (new FormData(event.target)).get('pid'); window.location=`../problem/id_${pid}.html`"><a href="../problemlist.html">Problems</a><br/><a href="http://poj.org/submit">Submit Problem</a><br/><a href="http://poj.org/status">Online Status</a><br/><font color="blue">Prob.ID:</font><input name="pid" size="6" type="text"/><input name="pb1" type="Submit" value="Go"/></form></td><td class="h" onmouseout="scbg(this,0)" onmouseover="scbg(this,1)"><form action="searchuser" method="GET"><a href="http://poj.org/register">Register</a><br/><a href="http://poj.org/modifyuser">Update your info</a><br/><a href="http://poj.org/userlist">Authors ranklist</a><br/><input name="key" size="10" type="text"/><input name="B1" type="Submit" value="Search"/></form></td>
<td class="h" onmouseout="scbg(this,0)" onmouseover="scbg(this,1)"><font color="#1a5cc8">Current Contest</font><br/><a href="http://poj.org/pastcontests">Past Contests</a><br/><a href="http://poj.org/contests">Scheduled Contests</a><br/><a href="http://poj.org/challenge.html" target="_blank"><font color="red">Award Contest</font></a></td><td align="left" class="h" onmouseout="scbg(this,0)" onmouseover="scbg(this,1)"><form action="login" method="POST"><table><tr><td>User ID:</td><td><input name="user_id1" size="10" style="font-family:monospace" type="text"/></td></tr><tr><td>Password:</td><td><input name="password1" size="10" style="font-family:monospace" type="password"/></td></tr></table><input name="B1" type="Submit" value="login"/>  <a href="http://poj.org/register" target="_parent">Register</a><input name="url" type="hidden" value="%2Fproblem%3Fid%3D3652"/></form></td></tr></tbody></table><table background="../images/table_back.jpg" border="0" width="100%"><tr><td>
<div style="position: absolute; right: 10px;">Language:<select onchange="window.location.href='problem?id=3652&amp;lang='+this.value+'&amp;change=true'" size="1"><option selected="" value="default">Default</option></select></div><div class="ptt" lang="en-US">Persistent Bits</div>
<div class="plm"><table align="center"><tr><td><b>Time Limit:</b> 1000MS</td><td width="10px"></td><td><b>Memory Limit:</b> 65536K</td></tr><tr><td><b>Total Submissions:</b> 2872</td><td width="10px"></td><td><b>Accepted:</b> 1636</td></tr></table></div><p class="pst">Description</p><div class="ptx" lang="en-US"><div><p>WhatNext Software creates sequence generators that they hope will produce fairly random sequences of 16-bit unsigned integers in the range 0–65535. In general a sequence is specified by integers <i>A</i>, <i>B</i>, <i>C</i>, and <i>S</i>, where 1 ≤ <i>A</i> &lt; 32768, 0 ≤ <i>B</i> &lt; 65536, 2 ≤ <i>C</i> &lt; 65536, and 0 ≤ <i>S</i> &lt; <i>C</i>. <i>S</i> is the first element (the <dfn>seed</dfn>) of the sequence, and each later element is generated from the previous element. If <i>X</i> is an element of the sequence, then the next element is</p><blockquote>(<i>A</i> * <i>X</i> + <i>B</i>) % <i>C</i> </blockquote><p>where '%' is the remainder or modulus operation. Although every element of the sequence will be a 16-bit unsigned integer less than 65536, the intermediate result <i>A</i> * <i>X</i> + B may be larger, so calculations should be done with a 32-bit <i>int</i> rather than a 16-bit <i>short</i> to ensure accurate results.</p><p>Some values of the parameters produce better sequences than others. The most embarrassing sequences to WhatNext Software are ones that never change one or more bits. A bit that never changes throughout the sequence is <dfn>persistent</dfn>. Ideally, a sequence will have no persistent bits. Your job is to test a sequence and determine which bits are persistent.</p><p>For example, a particularly bad choice is <i>A</i> = 2, <i>B</i> = 5, <i>C</i> = 18, and <i>S</i> = 3. It produces the sequence 3, (2*3+5)%18 = 11, (2*11+5)%18 = 9, (2*9+5)%18 = 5, (2*5+5)%18 = 15, (2*15+5)%18 = 17, then (2*17+5)%18 = 3 again, and we're back at the beginning. So the sequence repeats the the same six values over and over:</p><table border="1" cellpadding="2" cellspacing="2" style="text-align: left; width: 200px;"><tbody><tr><td align="center" style="font-family: monospace;" valign="middle">Decimal</td><td align="center" style="font-family: monospace;" valign="middle">16-Bit Binary</td></tr><tr><td align="center" style="font-family: monospace;" valign="middle">3</td><td align="center" style="font-family: monospace;" valign="middle">0000000000000011</td></tr><tr><td align="center" style="font-family: monospace;" valign="middle">11</td><td align="center" style="font-family: monospace;" valign="middle">0000000000001011</td></tr><tr><td align="center" style="font-family: monospace;" valign="middle">9</td><td align="center" style="font-family: monospace;" valign="middle">0000000000001001</td></tr><tr><td align="center" style="font-family: monospace;" valign="middle">5</td><td align="center" style="font-family: monospace;" valign="middle">0000000000000101</td></tr><tr><td align="center" style="font-family: monospace;" valign="middle">15</td><td align="center" style="font-family: monospace;" valign="middle">0000000000001111</td></tr><tr><td align="center" style="font-family: monospace;" valign="middle">17</td><td align="center" style="font-family: monospace;" valign="middle">0000000000010001</td></tr><tr><td align="center" valign="middle">overall</td><td align="center" style="font-family: monospace;" valign="middle">00000000000????1</td></tr></tbody></table><p>The last line of the table indicates which bit positions are always 0, always 1, or take on both values in the sequence. Note that 12 of the 16 bits are persistent. (Good random sequences will have no persistent bits, but the converse is not necessarily true. For example, the sequence defined by <i>A</i> = 1, <i>B</i> = 1, <i>C</i> = 64000, and S = 0 has no persistent bits, but it's also not random: it just counts from 0 to 63999 before repeating.)  Note that a sequence does not need to return to the seed: with <i>A</i> = 2, <i>B</i> = 0, <i>C</i> = 16, and <i>S</i> = 2, the sequence goes 2, 4, 8, 0, 0, 0, ....</p></div></div><p class="pst">Input</p><div class="ptx" lang="en-US"><p>There are from one to sixteen datasets followed by a line containing only 0. Each dataset is a line containing decimal integer values for A, B, C, and S, separated by single blanks.</p></div><p class="pst">Output</p><div class="ptx" lang="en-US"><p>There is one line of output for each data set, each containing 16 characters, either '1', '0', or '?' for each of the 16 bits in order, with the most significant bit first, with '1' indicating the corresponding bit is always 1, '0' meaning the corresponding bit is always 0, and '?' indicating the bit takes on values of both 0 and 1 in the sequence.</p></div><p class="pst">Sample Input</p><pre class="sio">2 5 18 3
1 1 64000 0
2 0 16 2
256 85 32768 21845
1 4097 32776 248
0</pre><p class="pst">Sample Output</p><pre class="sio">00000000000????1
????????????????
000000000000???0
0101010101010101
0???000011111???</pre><p class="pst">Source</p><div class="ptx" lang="en-US"><a href="http://poj.org/searchproblem?field=source&amp;key=Mid-Central+USA+2007">Mid-Central USA 2007</a></div></td></tr></table>
<font color="#333399" size="3"><p align="center">
[<a href="http://poj.org/submit?problem_id=3652">Submit</a>]  
 [<a href="javascript:history.go(-1)">Go Back</a>]   [<a href="http://poj.org/problemstatus?problem_id=3652">Status</a>]   
[<a href="http://poj.org/bbs?problem_id=3652">Discuss</a>]
</p></font>
<p><img border="0" height="30" src="../images/home.gif" width="40"/><font size="3"><a href="../index.html">Home Page</a> </font>  <img border="0" height="30" src="../images/goback.gif" width="40"/><font size="3"><a href="javascript:history.go(-1)">Go Back</a>  <img border="0" height="30" src="../images/top.gif" width="40"/><a href="http://poj.org#top">To top</a></font><br/></p><hr/><p align="center" style="font-family:Arial, Helvetica, sans-serif">All Rights Reserved 2003-2013 Ying Fuchen,Xu Pengcheng,Xie Di<br/>Any problem, Please <a href="mailto:webmaster@poj.org">Contact Administrator</a></p></body></html>
