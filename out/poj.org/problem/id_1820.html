<html><head><meta content="no-cache" http-equiv="Pragma"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta content="en-US" http-equiv="Content-Language"/><title>1820 -- Expression</title><link href="../poj.css" rel="stylesheet" type="text/css"/><link href="../poj.ico" rel="shortcut icon"/><link href="../poj.gif" rel="icon" type="image/gif"/><script language="javascript" src="../poj.js"></script></head><body alink="blue" lang="en-US" leftmargin="5" link="blue" onkeydown="KeyDown(event)" vlink="blue"><a name="top"></a><table border="1" bordercolor="#ffffff" style="BORDER-COLLAPSE: collapse" width="100%"><tbody><tr><td align="CENTER" colspan="5"><table cellpadding="0" class="h1"><tr><td align="left" width="25%"><img border="0" height="100" src="../images/logo1.jpg"/></td><td bgcolor="#EAEFFD" colspan="3"><table class="h2"><tr><td><img border="0" height="90" src="../images/logo0.gif" width="450"/></td><td width="95"><img border="0" height="95" src="../images/logo3.gif" width="95"/></td></tr></table></td></tr></table></td></tr><tr align="CENTER" bgcolor="#6589d1" valign="top"><th class="h">Online Judge</th><th class="h">Problem Set</th><th class="h">Authors</th><th class="h">Online Contests</th><th class="h">User</th></tr><tr align="CENTER" bgcolor="#f1f1fd" valign="top"><td class="h" onmouseout="scbg(this, 0)" onmouseover="scbg(this, 1)"><a href="http://poj.org/bbs">Web Board</a><br/><a href="../index.html">Home Page</a><br/><a href="../page/id_1000.html" target="_blank">F.A.Qs</a><br/><a href="http://poj.org/chart">Statistical Charts</a></td><td class="h" onmouseout="scbg(this, 0)" onmouseover="scbg(this, 1)"><form onsubmit="event.preventDefault(); let pid = (new FormData(event.target)).get('pid'); window.location=`../problem/id_${pid}.html`"><a href="../problemlist.html">Problems</a><br/><a href="http://poj.org/submit">Submit Problem</a><br/><a href="http://poj.org/status">Online Status</a><br/><font color="blue">Prob.ID:</font><input name="pid" size="6" type="text"/><input name="pb1" type="Submit" value="Go"/></form></td><td class="h" onmouseout="scbg(this,0)" onmouseover="scbg(this,1)"><form action="searchuser" method="GET"><a href="http://poj.org/register">Register</a><br/><a href="http://poj.org/modifyuser">Update your info</a><br/><a href="http://poj.org/userlist">Authors ranklist</a><br/><input name="key" size="10" type="text"/><input name="B1" type="Submit" value="Search"/></form></td>
<td class="h" onmouseout="scbg(this,0)" onmouseover="scbg(this,1)"><font color="#1a5cc8">Current Contest</font><br/><a href="http://poj.org/pastcontests">Past Contests</a><br/><a href="http://poj.org/contests">Scheduled Contests</a><br/><a href="http://poj.org/challenge.html" target="_blank"><font color="red">Award Contest</font></a></td><td align="left" class="h" onmouseout="scbg(this,0)" onmouseover="scbg(this,1)"><form action="login" method="POST"><table><tr><td>User ID:</td><td><input name="user_id1" size="10" style="font-family:monospace" type="text"/></td></tr><tr><td>Password:</td><td><input name="password1" size="10" style="font-family:monospace" type="password"/></td></tr></table><input name="B1" type="Submit" value="login"/>  <a href="http://poj.org/register" target="_parent">Register</a><input name="url" type="hidden" value="%2Fproblem%3Fid%3D1820"/></form></td></tr></tbody></table><table background="../images/table_back.jpg" border="0" width="100%"><tr><td>
<div style="position: absolute; right: 10px;">Language:<select onchange="window.location.href='problem?id=1820&amp;lang='+this.value+'&amp;change=true'" size="1"><option selected="" value="default">Default</option></select></div><div class="ptt" lang="en-US">Expression</div>
<div class="plm"><table align="center"><tr><td><b>Time Limit:</b> 1000MS</td><td width="10px"></td><td><b>Memory Limit:</b> 65536K</td></tr><tr><td><b>Total Submissions:</b> 2386</td><td width="10px"></td><td><b>Accepted:</b> 27</td></tr></table></div><p class="pst">Description</p><div class="ptx" lang="en-US">By definition, a symbolic expression is:<br/> <br/>a) a natural number;<br/> <br/>b) a name made by a succession of letters that identifies another symbolic expression;<br/> <br/>c) a list formed of 0 or more symbolic expressions, separated by a space, delimited by round brackets. An example of symbolic expression created from a list with 3 elements is: (A 2 (3 (B))).<br/> <br/>A definition assigns a name to a symbolic expression and it has the following form:<br/> <br/>Name = SymbolicExpression<br/> <br/>Two symbolic expressions E1 and E2 are equivalent if:<br/><ol type="a"><li>E1 is a number, E2 is a number and they have the same value; <br/></li><li>E1 and E2 are the names of two equivalent symbolic expressions; <br/></li><li>E1 and E2 are equivalent lists; two lists are equivalent if they contain the same number of symbolic expressions, and the expressions from the corresponding positions are equivalent. <br/></li><li>The equivalence relation between expressions is transitive (if expression E1 is equivalent to expression E2, and expression E2 is equivalent to expression E3, than we infer that E1 is equivalent to E3).<br/></li><li>If after applying the rules a)-d) you can not decide on the equivalence (or unequivalence) of the expressions, than they will be considered equivalent.</li></ol> <br/>For example:<br/><ol><li>The symbolic expression (1 2) is not equivalent with (2 1). <br/></li><li>The symbolic expressions (1 (2 3) 4) and (1 (2) (3 4)) are not equivalent. <br/></li><li>For the following definitions: <br/>A = B<br/> <br/>B = (1 (2 abc))<br/> <br/>abc = (1 34)<br/> <br/>X = ((1 (2 abc)) (1 34))<br/> <br/>Y = (A abc)<br/> <br/>Z = (1 2 abc (1 34))<br/> <br/>The symbolic expressions X and Y are equivalent. The symbolic expressions X and Z are not equivalent.<br/></li><li>For the following definitions: <br/>A = B<br/> <br/>C = (D E)<br/> <br/>B = (D E)<br/> <br/>The expressions A and C are equivalent.<br/></li><li>For the following definitions:<br/>The symbolic expressions A and B are equivalent (according to rule e).</li></ol> <br/>An interrogation is used for testing the equivalence of two symbolic expressions and it has the following form:<br/> <br/><b>Expression1 ? Expression2</b> <br/> <br/>The result of an interrogation is either 0 or 1 ( 0 if the expressions are not equivalent and 1 otherwise). <br/> <br/>Write a program that reads from a file a succession of definitions, followed by a series of interrogations and displays the result of the interrogations. <br/></div><p class="pst">Input</p><div class="ptx" lang="en-US">The input contains a succession of expression definitions (each definition on a new line), terminated (on a separate line) with the tag EOD, after which follows a succession of interrogations (one interrogation per line), ended (on a separate line) with the tag EOE. <br/> <br/>Constrains and specifications:<br/> <br/>The number of definitions is smaller than 30 <br/>The number of interrogations is smaller than 30 <br/>The number of symbols from a list, different from spaces and brackets, is smaller than 50. <br/>The sign = from a definition, respective the sign ? from an interrogation are bordered by one space. <br/>The name of an expression is at most 8 characters long. <br/>The natural numbers are smaller or equal than 30000 <br/>The name of a symbolic expression may appear in the definition of that expression. <br/>In the input file there is a single definition for each symbolic expression. <br/>The order of the definitions in the input file does not matter. <br/>The names of the symbolic expressions are not case sensitive. </div><p class="pst">Output</p><div class="ptx" lang="en-US">The output contains one line for each interrogation from the input file, on which line will be displayed the result of the interrogation (0 or 1).</div><p class="pst">Sample Input</p><pre class="sio">A = 12
B = 13
BB = 12
Bbb = (12)
G = (1 (1 E))
c = (1 2 3)
D = (1 2 3)
dD = (1 2 6)
E = (1 E)
F = (1 E)
EOD
A ? B
A ? BB
C ? D
c ? DD
E ? E
F ? E
G ? E
BB ? bbb
EOE</pre><p class="pst">Sample Output</p><pre class="sio">0
1
1
0
1
1
1
0</pre><p class="pst">Source</p><div class="ptx" lang="en-US"><a href="http://poj.org/searchproblem?field=source&amp;key=Romania+OI+2002">Romania OI 2002</a></div></td></tr></table>
<font color="#333399" size="3"><p align="center">
[<a href="http://poj.org/submit?problem_id=1820">Submit</a>]  
 [<a href="javascript:history.go(-1)">Go Back</a>]   [<a href="http://poj.org/problemstatus?problem_id=1820">Status</a>]   
[<a href="http://poj.org/bbs?problem_id=1820">Discuss</a>]
</p></font>
<p><img border="0" height="30" src="../images/home.gif" width="40"/><font size="3"><a href="../index.html">Home Page</a> </font>  <img border="0" height="30" src="../images/goback.gif" width="40"/><font size="3"><a href="javascript:history.go(-1)">Go Back</a>  <img border="0" height="30" src="../images/top.gif" width="40"/><a href="http://poj.org#top">To top</a></font><br/></p><hr/><p align="center" style="font-family:Arial, Helvetica, sans-serif">All Rights Reserved 2003-2013 Ying Fuchen,Xu Pengcheng,Xie Di<br/>Any problem, Please <a href="mailto:webmaster@poj.org">Contact Administrator</a></p></body></html>
