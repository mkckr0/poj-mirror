<html><head><meta content="no-cache" http-equiv="Pragma"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta content="en-US" http-equiv="Content-Language"/><title>2180 -- Bale Figures</title><link href="../poj.css" rel="stylesheet" type="text/css"/><link href="../poj.ico" rel="shortcut icon"/><link href="../poj.gif" rel="icon" type="image/gif"/><script language="javascript" src="../poj.js"></script></head><body alink="blue" lang="en-US" leftmargin="5" link="blue" onkeydown="KeyDown(event)" vlink="blue"><a name="top"></a><table border="1" bordercolor="#ffffff" style="BORDER-COLLAPSE: collapse" width="100%"><tbody><tr><td align="CENTER" colspan="5"><table cellpadding="0" class="h1"><tr><td align="left" width="25%"><img border="0" height="100" src="../images/logo1.jpg"/></td><td bgcolor="#EAEFFD" colspan="3"><table class="h2"><tr><td><img border="0" height="90" src="../images/logo0.gif" width="450"/></td><td width="95"><img border="0" height="95" src="../images/logo3.gif" width="95"/></td></tr></table></td></tr></table></td></tr><tr align="CENTER" bgcolor="#6589d1" valign="top"><th class="h">Online Judge</th><th class="h">Problem Set</th><th class="h">Authors</th><th class="h">Online Contests</th><th class="h">User</th></tr><tr align="CENTER" bgcolor="#f1f1fd" valign="top"><td class="h" onmouseout="scbg(this, 0)" onmouseover="scbg(this, 1)"><a href="http://poj.org/bbs">Web Board</a><br/><a href="../index.html">Home Page</a><br/><a href="../page/id_1000.html" target="_blank">F.A.Qs</a><br/><a href="http://poj.org/chart">Statistical Charts</a></td><td class="h" onmouseout="scbg(this, 0)" onmouseover="scbg(this, 1)"><form onsubmit="event.preventDefault(); let pid = (new FormData(event.target)).get('pid'); window.location=`../problem/id_${pid}.html`"><a href="../problemlist.html">Problems</a><br/><a href="http://poj.org/submit">Submit Problem</a><br/><a href="http://poj.org/status">Online Status</a><br/><font color="blue">Prob.ID:</font><input name="pid" size="6" type="text"/><input name="pb1" type="Submit" value="Go"/></form></td><td class="h" onmouseout="scbg(this,0)" onmouseover="scbg(this,1)"><form action="searchuser" method="GET"><a href="http://poj.org/register">Register</a><br/><a href="http://poj.org/modifyuser">Update your info</a><br/><a href="http://poj.org/userlist">Authors ranklist</a><br/><input name="key" size="10" type="text"/><input name="B1" type="Submit" value="Search"/></form></td>
<td class="h" onmouseout="scbg(this,0)" onmouseover="scbg(this,1)"><font color="#1a5cc8">Current Contest</font><br/><a href="http://poj.org/pastcontests">Past Contests</a><br/><a href="http://poj.org/contests">Scheduled Contests</a><br/><a href="http://poj.org/challenge.html" target="_blank"><font color="red">Award Contest</font></a></td><td align="left" class="h" onmouseout="scbg(this,0)" onmouseover="scbg(this,1)"><form action="login" method="POST"><table><tr><td>User ID:</td><td><input name="user_id1" size="10" style="font-family:monospace" type="text"/></td></tr><tr><td>Password:</td><td><input name="password1" size="10" style="font-family:monospace" type="password"/></td></tr></table><input name="B1" type="Submit" value="login"/>  <a href="http://poj.org/register" target="_parent">Register</a><input name="url" type="hidden" value="%2Fproblem%3Fid%3D2180"/></form></td></tr></tbody></table><table background="../images/table_back.jpg" border="0" width="100%"><tr><td>
<div style="position: absolute; right: 10px;">Language:<select onchange="window.location.href='problem?id=2180&amp;lang='+this.value+'&amp;change=true'" size="1"><option selected="" value="default">Default</option></select></div><div class="ptt" lang="en-US">Bale Figures</div>
<div class="plm"><table align="center"><tr><td><b>Time Limit:</b> 1000MS</td><td width="10px"></td><td><b>Memory Limit:</b> 65536K</td></tr><tr><td><b>Total Submissions:</b> 879</td><td width="10px"></td><td><b>Accepted:</b> 401</td></tr></table></div><p class="pst">Description</p><div class="ptx" lang="en-US">Cows like to build shapes out of hay bales. Each new shape is constructed from N (1 &lt;= N &lt;= 25,000) 1 x 1 x 1 cubic bales.<br/> <br/>Bale 1 lies on the floor. After placing it, each successive bale from 2 through N is attached to the shape by placing the new bale in the proper relative position to one of the bales already placed.  For instance, imagine the following figure:<br/><blockquote>     Bale 1 - on the floor<br/>     Bale 2 - RIGHT Bale 1 (to Bale 1's right)<br/>     Bale 3 - FRONT Bale 2 (in front of Bale 2) <br/>     Bale 4 - FRONT Bale 3</blockquote> <br/>This results in an (inverted) L-shape:<br/><pre><br/>                     +--+--+                      <br/>                1-&gt; /  /  /| &lt;-2                      <br/>                   +--+--+ +<br/>                   | /  /|/                         <br/>                   ++--+ +                       <br/>                   /  /|/ &lt;-3                     <br/>                  +--+ +                          <br/>                  |  |/ &lt;-4                       <br/>                  +--+                            </pre> <br/>Adding another bale:<br/><blockquote>Bale 5 - OVER Bale 1</blockquote> <br/>adds height to the shape:<br/><pre><br/>                     +--+                            <br/>                    /  /|                           <br/>                   +--+ +--+                      <br/>               5-&gt; |  |/  /| &lt;-2                      <br/>                   +--+--+ +<br/>               1-&gt; | /  /|/                         <br/>                   ++--+ +                       <br/>                   /  /|/ &lt;-3                     <br/>                  +--+ +                          <br/>                  |  |/ &lt;-4                       <br/>                  +--+                            </pre> <br/>But adding another directive:<br/><blockquote>Bale 6 - BACK Bale 4</blockquote> <br/>results in an invalid shape, since bales 3 and 6 would overlap.<br/> <br/>Given N bales and placements described as above, output the exposed surface area of the solid figure if the shape is valid.  A face is considered exposed if it is not touched by any face of any other bale and does not touch the floor (i.e., is not the bottom of a cube on the floor).  Output -1 if the shape is invalid.  No bale will be placed farther than 25 bale-widths from the first bale.  No bale will be placed below the floor level.<br/> <br/></div><p class="pst">Input</p><div class="ptx" lang="en-US">* Line 1: A single integer, N<br/> <br/>* Lines 2..N: These lines describe the placement of bales 2..N in the form "j X". Line 2 describes bale 2; line 3 describes bale 3; and so on. The letter "X" is one of: "L" (left), "R" (right), "F" (front), "B" (back), "O" (over), or "U" (under). The bales can be glued and require no underlying support if extended over an empty space.<br/></div><p class="pst">Output</p><div class="ptx" lang="en-US">* Line 1: The exposed surface area of the resulting solid.  If the solid is invalid, output "-1".<br/></div><p class="pst">Sample Input</p><pre class="sio">5
1 R
2 F
3 F
1 O
</pre><p class="pst">Sample Output</p><pre class="sio">18
</pre><p class="pst">Source</p><div class="ptx" lang="en-US"><a href="http://poj.org/searchproblem?field=source&amp;key=USACO+2003+U+S+Open+Orange">USACO 2003 U S Open Orange</a></div></td></tr></table>
<font color="#333399" size="3"><p align="center">
[<a href="http://poj.org/submit?problem_id=2180">Submit</a>]  
 [<a href="javascript:history.go(-1)">Go Back</a>]   [<a href="http://poj.org/problemstatus?problem_id=2180">Status</a>]   
[<a href="http://poj.org/bbs?problem_id=2180">Discuss</a>]
</p></font>
<p><img border="0" height="30" src="../images/home.gif" width="40"/><font size="3"><a href="../index.html">Home Page</a> </font>  <img border="0" height="30" src="../images/goback.gif" width="40"/><font size="3"><a href="javascript:history.go(-1)">Go Back</a>  <img border="0" height="30" src="../images/top.gif" width="40"/><a href="http://poj.org#top">To top</a></font><br/></p><hr/><p align="center" style="font-family:Arial, Helvetica, sans-serif">All Rights Reserved 2003-2013 Ying Fuchen,Xu Pengcheng,Xie Di<br/>Any problem, Please <a href="mailto:webmaster@poj.org">Contact Administrator</a></p></body></html>
